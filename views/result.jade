doctype html
html
	head
		script(src='http://code.jquery.com/jquery-latest.min.js')
		script(type="text/javascript").
			var test="#{records}";
			
			console.log(test);
			var newtest = test.replace(/&quot;/g,'"');
			var recordArray = JSON.parse(newtest);
			console.log(recordArray.length);
			$(document).ready(function()
			{	
				console.log(recordArray[0].origin);			
				for(var i=0;i<recordArray.length;i++)
				{
						$("#holder").append(recordArray[i].origin+"  ");
						$("#holder").append(recordArray[i].destination+"  ");
						$("#holder").append(recordArray[i].bounds+"  ");
						$("#holder").append("<br>");
				}
			});
			//Load Maps
		script(src='https://maps.googleapis.com/maps/api/js?key=AIzaSyAwd96WzMqV5K8p8JZwKCf2voxCgPFsYqY', type='text/javascript')
		// RouteBoxer
		script(src='javascripts/routeBoxer.js')
		// Actual computaton -
		script(type='text/javascript').
			var directionService = new google.maps.DirectionsService();
			var rBoxer = new RouteBoxer();
			var distance = 20; // km
			var request={origin:{lat:33.307632, lng:-111.94373739999997},
			destination:{lat:39.7392, lng:-104.9903},
			travelMode:google.maps.TravelMode.DRIVING,
			unitSystem:google.maps.UnitSystem.METRIC,
			};
			directionService.route(request, function(result, status) {
			if (status == google.maps.DirectionsStatus.OK) {
			console.log("success!");
			// Box the overview path of the first route
			var path = result.routes[0].overview_path;
			var boxes = rBoxer.box(path, distance);
			console.log("No of points is" + result.routes[0].overview_path.length);
			for (var i = 0; i < boxes.length; i++) {
			var bounds = boxes[i];
			// Perform search over this bounds
			}
			console.log("No of boxes is " + boxes.length) ;
			//console.log("Values gotten are " + #{first} + " " + #{second} + #{third}); 
			}
			else
			{
			console.log("Failure");
			}
			});
		
	body
		div#holder 
		
		
		